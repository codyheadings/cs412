<!-- promptmix/templates/promptmix/followed_search.html -->
<!-- Cody Headings, codyh@bu.edu 12/08/25 -->
<!-- html form page for filtering/sorting followed prompts -->

<table class="search">
<form action="{% url 'show_followed' %}">
    <tr>
        <th>Search Keywords:</th>
        <td>
            <input type="text" name="keywords" {% if get_request.keywords%}value="{{get_request.keywords}}"{% endif %}>
        </td>
    </tr>
    <tr>
        <th>Sort By:</th>
        <td><select name="sort">
            <option value="popular" {% if get_request.sort == "popular" %}selected{% endif %}>Most Popular</option>
            <option value="unpopular" {% if get_request.sort == "unpopular" %}selected{% endif %}>Least Popular</option>
            <option value="newest" {% if get_request.sort == "newest" %}selected{% endif %}>Newest</option>
            <option value="oldest" {% if get_request.sort == "oldest" %}selected{% endif %}>Oldest</option>
        </select></td>
    </tr>
    <tr>
        <td><p></p></td>
    </tr>
    <tr>
        <td><input type="submit" class="minibutton"></td>
    </tr>
</form>
</table>

<table>
    <form action="{% url 'show_followed' %}">
        <tr>
            <td>
                <input type="submit" value="Reset" class="minibutton">
            </td>
        </tr>
    </form>
</table>

<br>

<div class="thread-controls">
    <button onclick="collapseAll()" class="collapse-all-button">Collapse All</button>
    <button onclick="expandAll()" class="collapse-all-button">Expand All</button>
</div>

<script>
function collapseAll() {
    document.querySelectorAll(".prompt-remixes").forEach(remixBlock => {
        remixBlock.style.display = "none";
    });
    document.querySelectorAll(".collapse-button").forEach(btn => {
        btn.textContent = "Expand";
    });
}

function expandAll() {
    document.querySelectorAll(".prompt-remixes").forEach(remixBlock => {
        remixBlock.style.display = "";
    });
    document.querySelectorAll(".collapse-button").forEach(btn => {
        btn.textContent = "Collapse";
    });
}
</script>